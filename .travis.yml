language: node_js
node_js:
  - 'stable'

cache:
  directories:
    - "node_modules"

script:
  - npm test
  - npm run build

deploy:
  provider: pages
  github-token: 2f6473f89265bc98b84c908e0411adf5cc563cb8
  committer-from-gh: true
  skip-cleanup: true
  keep-history: true
  local-dir: build
  repo: anton-bary.github.io/todolist/
  target-branch: main
  on:
    branch: main